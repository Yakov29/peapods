{"mappings":"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","sources":["<anon>","src/js/home.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire2ef1\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire2ef1\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $fmRoT = parcelRequire(\"fmRoT\");\n// Fetch user profile\nasync function $212038711ef1a1fe$var$fetchProfiles() {\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n    if (loggedInUser) try {\n        const response = await (0, $fmRoT.default).get(`https://peapods-base.onrender.com/accounts/${loggedInUser.id}`);\n        const user = response.data;\n        if (user) {\n            document.getElementById(\"profileName\").textContent = user.name;\n            document.getElementById(\"profileNickname\").textContent = `@${user.username}`;\n        } else $212038711ef1a1fe$var$handleProfileError();\n    } catch (error) {\n        console.error(\"Error fetching profile:\", error);\n        $212038711ef1a1fe$var$handleProfileError();\n    }\n    else window.location.href = \"index.html\";\n}\n// Handle missing or deleted profile error\nfunction $212038711ef1a1fe$var$handleProfileError() {\n    alert(\"\\u0410\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442 \\u0432\\u0438\\u0434\\u0430\\u043B\\u0435\\u043D\\u043E \\u0430\\u0431\\u043E \\u0432\\u0438\\u043D\\u0438\\u043A\\u043B\\u0430 \\u043F\\u043E\\u043C\\u0438\\u043B\\u043A\\u0430.\");\n    localStorage.removeItem(\"loggedInUser\");\n    window.location.href = \"index.html\";\n}\n// Fetch pods\nasync function $212038711ef1a1fe$var$fetchPods() {\n    try {\n        const response = await (0, $fmRoT.default).get(\"https://peapods-base.onrender.com/pods\");\n        const pods = response.data.sort((a, b)=>new Date(b.time) - new Date(a.time));\n        const podsContainer = document.getElementById(\"podsContainer\");\n        podsContainer.innerHTML = \"\";\n        const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n        const currentUserId = loggedInUser.id;\n        pods.forEach((pod)=>{\n            const podItem = document.createElement(\"li\");\n            podItem.classList.add(\"pod\");\n            podItem.innerHTML = `\n                <div class=\"pod__title\">\n                    <img class=\"pod__user__image\" src=\"${pod.userImage || \"./images/default-avatar.png\"}\" alt=\"User Image\" style=\"cursor: pointer;\" data-username=\"${pod.username}\">\n                    <div class=\"pod__data\">\n                        <p class=\"pod__userdata\" style=\"cursor: pointer;\" data-username=\"${pod.username}\">${pod.username || \"Anonymous\"}</p>\n                        <p class=\"pod__time\">${new Date(pod.time).toLocaleString()}</p>\n                    </div>\n                </div>\n                <h2 class=\"pod__text\">${pod.text}</h2>\n                ${pod.image ? `<img class=\"pod__image\" src=\"${pod.image}\" alt=\"Pod Image\">` : \"\"}\n                <ul class=\"comments-list\" id=\"comments-${pod.id}\">\n                    ${pod.comments ? pod.comments.map((comment)=>`\n                        <li class=\"comment-item\">\n                            <p><b>${comment.username}</b>: ${comment.text}</p>\n                            ${comment.userId === currentUserId ? `<button class=\"delete-comment-btn\" data-comment-id=\"${comment.commentId}\" data-pod-id=\"${pod.id}\"><i class=\"fas fa-trash-alt\"></i></button>` : \"\"}\n                        </li>\n                    `).join(\"\") : \"\"}\n                </ul>\n                <input class=\"comment-text\" id=\"commentText-${pod.id}\" placeholder=\"Write a comment...\">\n                <button class=\"comment-btn\" data-pod-id=\"${pod.id}\"><i class=\"fas fa-comment\"></i></button>\n            `;\n            const userImage = podItem.querySelector(\".pod__user__image\");\n            const usernameElement = podItem.querySelector(\".pod__userdata\");\n            userImage.addEventListener(\"click\", ()=>{\n                if (pod.username) window.location.href = `user.html?username=${encodeURIComponent(pod.username)}`;\n            });\n            usernameElement.addEventListener(\"click\", ()=>{\n                if (pod.username) window.location.href = `user.html?username=${encodeURIComponent(pod.username)}`;\n            });\n            if (pod.userId === currentUserId) {\n                const deleteButton = document.createElement(\"button\");\n                deleteButton.classList.add(\"delete-pod-button\");\n                deleteButton.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n                deleteButton.addEventListener(\"click\", ()=>{\n                    $212038711ef1a1fe$var$deletePod(pod.id);\n                });\n                podItem.appendChild(deleteButton);\n            }\n            podsContainer.appendChild(podItem);\n        });\n        $212038711ef1a1fe$var$setupCommentListeners();\n    } catch (error) {\n        console.error(\"Error fetching pods:\", error);\n    }\n}\n// Delete a pod\nasync function $212038711ef1a1fe$var$deletePod(podId) {\n    try {\n        await (0, $fmRoT.default).delete(`https://peapods-base.onrender.com/pods/${podId}`);\n        await $212038711ef1a1fe$var$updateProfilePodCountOnDelete(podId);\n        $212038711ef1a1fe$var$fetchPods();\n    } catch (error) {\n        console.error(\"Error deleting pod:\", error);\n    }\n}\n// Update profile pod count on delete\nasync function $212038711ef1a1fe$var$updateProfilePodCountOnDelete(podId) {\n    try {\n        const response = await (0, $fmRoT.default).get(\"https://peapods-base.onrender.com/pods/\" + podId);\n        const pod = response.data;\n        const profileResponse = await (0, $fmRoT.default).get(\"https://peapods-base.onrender.com/accounts\");\n        const profiles = profileResponse.data;\n        const profile = profiles.find((profile)=>profile.username === pod.username);\n        if (profile) {\n            profile.podsCount = (profile.podsCount || 0) - 1;\n            await (0, $fmRoT.default).put(`https://peapods-base.onrender.com/accounts/${profile.id}`, profile);\n        }\n    } catch (error) {\n        console.error(\"Error updating profile pod count on delete:\", error);\n    }\n}\n// Setup listeners for comment buttons\nfunction $212038711ef1a1fe$var$setupCommentListeners() {\n    const commentButtons = document.querySelectorAll(\".comment-btn\");\n    const deleteCommentButtons = document.querySelectorAll(\".delete-comment-btn\");\n    commentButtons.forEach((button)=>{\n        button.addEventListener(\"click\", async ()=>{\n            const podId = button.getAttribute(\"data-pod-id\");\n            const commentText = document.getElementById(`commentText-${podId}`).value;\n            if (commentText.trim()) await $212038711ef1a1fe$var$addComment(podId, commentText);\n        });\n    });\n    deleteCommentButtons.forEach((button)=>{\n        button.addEventListener(\"click\", async ()=>{\n            const podId = button.getAttribute(\"data-pod-id\");\n            const commentId = button.getAttribute(\"data-comment-id\");\n            await $212038711ef1a1fe$var$deleteComment(podId, commentId);\n        });\n    });\n}\n// Add a comment\nasync function $212038711ef1a1fe$var$addComment(podId, commentText) {\n    try {\n        const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n        const response = await (0, $fmRoT.default).get(`https://peapods-base.onrender.com/pods/${podId}`);\n        const pod = response.data;\n        const newComment = {\n            commentId: Date.now(),\n            userId: loggedInUser.id,\n            username: loggedInUser.username,\n            text: commentText\n        };\n        pod.comments = pod.comments || [];\n        pod.comments.push(newComment);\n        await (0, $fmRoT.default).put(`https://peapods-base.onrender.com/pods/${podId}`, pod);\n        $212038711ef1a1fe$var$fetchPods();\n    } catch (error) {\n        console.error(\"Error adding comment:\", error);\n    }\n}\n// Delete a comment\nasync function $212038711ef1a1fe$var$deleteComment(podId, commentId) {\n    try {\n        const response = await (0, $fmRoT.default).get(`https://peapods-base.onrender.com/pods/${podId}`);\n        const pod = response.data;\n        pod.comments = pod.comments.filter((comment)=>comment.commentId !== parseInt(commentId));\n        await (0, $fmRoT.default).put(`https://peapods-base.onrender.com/pods/${podId}`, pod);\n        $212038711ef1a1fe$var$fetchPods();\n    } catch (error) {\n        console.error(\"Error deleting comment:\", error);\n    }\n}\n// Open and close modal for creating pod\nconst $212038711ef1a1fe$var$createPodButton = document.getElementById(\"createPodButton\");\nconst $212038711ef1a1fe$var$createPodModal = document.getElementById(\"createPodModal\");\nconst $212038711ef1a1fe$var$closeModalButton = document.getElementById(\"closeModalButton\");\nconst $212038711ef1a1fe$var$submitPodButton = document.getElementById(\"submitPodButton\");\n$212038711ef1a1fe$var$createPodButton.addEventListener(\"click\", ()=>{\n    $212038711ef1a1fe$var$createPodModal.classList.toggle(\"change__invisible\");\n    $212038711ef1a1fe$var$createPodModal.style.display = \"flex\";\n});\n$212038711ef1a1fe$var$closeModalButton.addEventListener(\"click\", ()=>{\n    $212038711ef1a1fe$var$createPodModal.classList.toggle(\"change__invisible\");\n    setTimeout(()=>{\n        $212038711ef1a1fe$var$createPodModal.style.display = \"none\";\n    }, 300);\n});\n// Prevent modal from closing on submit and fetch pods again\n$212038711ef1a1fe$var$submitPodButton.addEventListener(\"click\", async ()=>{\n    const podText = document.getElementById(\"podText\").value;\n    const podImageInput = document.getElementById(\"podImageInput\").files[0];\n    const isAnonymous = document.getElementById(\"anonymousCheckbox\").checked;\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n    if (podText.trim()) {\n        const newPod = {\n            userId: isAnonymous ? null : loggedInUser.id,\n            username: isAnonymous ? \"Anonymous\" : loggedInUser.username,\n            text: podText,\n            time: Date.now(),\n            comments: []\n        };\n        if (podImageInput) {\n            const imageUrl = await $212038711ef1a1fe$var$uploadImage(podImageInput);\n            newPod.image = imageUrl;\n        }\n        await (0, $fmRoT.default).post(\"https://peapods-base.onrender.com/pods\", newPod);\n        await $212038711ef1a1fe$var$updateProfilePodCountOnCreate(loggedInUser.id);\n        $212038711ef1a1fe$var$fetchPods();\n        $212038711ef1a1fe$var$createPodModal.classList.toggle(\"change__invisible\");\n        $212038711ef1a1fe$var$createPodModal.style.display = \"none\";\n    }\n});\n// Upload image function\nasync function $212038711ef1a1fe$var$uploadImage(image) {\n    const formData = new FormData();\n    formData.append(\"image\", image);\n    const response = await (0, $fmRoT.default).post(\"https://peapods-base.onrender.com/upload\", formData);\n    return response.data.imageUrl; // Adjust based on your API response structure\n}\n// Update profile pod count on create\nasync function $212038711ef1a1fe$var$updateProfilePodCountOnCreate(userId) {\n    try {\n        const profileResponse = await (0, $fmRoT.default).get(`https://peapods-base.onrender.com/accounts/${userId}`);\n        const profile = profileResponse.data;\n        if (profile) {\n            profile.podsCount = (profile.podsCount || 0) + 1;\n            await (0, $fmRoT.default).put(`https://peapods-base.onrender.com/accounts/${profile.id}`, profile);\n        }\n    } catch (error) {\n        console.error(\"Error updating profile pod count on create:\", error);\n    }\n}\n// Event listeners for opening modals\ndocument.addEventListener(\"DOMContentLoaded\", $212038711ef1a1fe$var$fetchProfiles);\ndocument.addEventListener(\"DOMContentLoaded\", $212038711ef1a1fe$var$fetchPods);\nconst $212038711ef1a1fe$var$toTopButton = document.getElementById(\"toTopButton\");\n// Показати кнопку при прокручуванні вниз\nwindow.onscroll = function() {\n    if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) $212038711ef1a1fe$var$toTopButton.style.display = \"block\";\n    else $212038711ef1a1fe$var$toTopButton.style.display = \"none\";\n};\n// Прокрутка до верхньої частини сторінки\n$212038711ef1a1fe$var$toTopButton.addEventListener(\"click\", ()=>{\n    window.scrollTo({\n        top: 0,\n        behavior: \"smooth\"\n    });\n});\n\n\n//# sourceMappingURL=home.7a0624e5.js.map\n","import axios from \"axios\";\n\n// Fetch user profile\nasync function fetchProfiles() {\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n    \n    if (loggedInUser) {\n        try {\n            const response = await axios.get(`https://peapods-base.onrender.com/accounts/${loggedInUser.id}`);\n            const user = response.data;\n\n            if (user) {\n                document.getElementById(\"profileName\").textContent = user.name;\n                document.getElementById(\"profileNickname\").textContent = `@${user.username}`;\n            } else {\n                handleProfileError();\n            }\n        } catch (error) {\n            console.error(\"Error fetching profile:\", error);\n            handleProfileError();\n        }\n    } else {\n        window.location.href = \"index.html\";\n    }\n}\n\n// Handle missing or deleted profile error\nfunction handleProfileError() {\n    alert(\"Аккаунт видалено або виникла помилка.\");\n    localStorage.removeItem(\"loggedInUser\"); \n    window.location.href = \"index.html\"; \n}\n\n// Fetch pods\nasync function fetchPods() {\n    try {\n        const response = await axios.get(\"https://peapods-base.onrender.com/pods\");\n        const pods = response.data.sort((a, b) => new Date(b.time) - new Date(a.time));\n        const podsContainer = document.getElementById(\"podsContainer\");\n        podsContainer.innerHTML = \"\";\n\n        const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n        const currentUserId = loggedInUser.id;\n\n        pods.forEach(pod => {\n            const podItem = document.createElement(\"li\");\n            podItem.classList.add(\"pod\");\n            podItem.innerHTML = `\n                <div class=\"pod__title\">\n                    <img class=\"pod__user__image\" src=\"${pod.userImage || './images/default-avatar.png'}\" alt=\"User Image\" style=\"cursor: pointer;\" data-username=\"${pod.username}\">\n                    <div class=\"pod__data\">\n                        <p class=\"pod__userdata\" style=\"cursor: pointer;\" data-username=\"${pod.username}\">${pod.username || \"Anonymous\"}</p>\n                        <p class=\"pod__time\">${new Date(pod.time).toLocaleString()}</p>\n                    </div>\n                </div>\n                <h2 class=\"pod__text\">${pod.text}</h2>\n                ${pod.image ? `<img class=\"pod__image\" src=\"${pod.image}\" alt=\"Pod Image\">` : ''}\n                <ul class=\"comments-list\" id=\"comments-${pod.id}\">\n                    ${pod.comments ? pod.comments.map(comment => `\n                        <li class=\"comment-item\">\n                            <p><b>${comment.username}</b>: ${comment.text}</p>\n                            ${comment.userId === currentUserId ? `<button class=\"delete-comment-btn\" data-comment-id=\"${comment.commentId}\" data-pod-id=\"${pod.id}\"><i class=\"fas fa-trash-alt\"></i></button>` : ''}\n                        </li>\n                    `).join('') : ''}\n                </ul>\n                <input class=\"comment-text\" id=\"commentText-${pod.id}\" placeholder=\"Write a comment...\">\n                <button class=\"comment-btn\" data-pod-id=\"${pod.id}\"><i class=\"fas fa-comment\"></i></button>\n            `;\n\n            const userImage = podItem.querySelector(\".pod__user__image\");\n            const usernameElement = podItem.querySelector(\".pod__userdata\");\n\n            userImage.addEventListener(\"click\", () => {\n                if (pod.username) {\n                    window.location.href = `user.html?username=${encodeURIComponent(pod.username)}`;\n                }\n            });\n\n            usernameElement.addEventListener(\"click\", () => {\n                if (pod.username) {\n                    window.location.href = `user.html?username=${encodeURIComponent(pod.username)}`;\n                }\n            });\n\n            if (pod.userId === currentUserId) {\n                const deleteButton = document.createElement(\"button\");\n                deleteButton.classList.add(\"delete-pod-button\");\n                deleteButton.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n                deleteButton.addEventListener(\"click\", () => {\n                    deletePod(pod.id);\n                });\n                podItem.appendChild(deleteButton);\n            }\n\n            podsContainer.appendChild(podItem);\n        });\n\n        setupCommentListeners();\n    } catch (error) {\n        console.error(\"Error fetching pods:\", error);\n    }\n}\n\n// Delete a pod\nasync function deletePod(podId) {\n    try {\n        await axios.delete(`https://peapods-base.onrender.com/pods/${podId}`);\n        await updateProfilePodCountOnDelete(podId);\n        fetchPods();\n    } catch (error) {\n        console.error(\"Error deleting pod:\", error);\n    }\n}\n\n// Update profile pod count on delete\nasync function updateProfilePodCountOnDelete(podId) {\n    try {\n        const response = await axios.get(\"https://peapods-base.onrender.com/pods/\" + podId);\n        const pod = response.data;\n\n        const profileResponse = await axios.get(\"https://peapods-base.onrender.com/accounts\");\n        const profiles = profileResponse.data;\n        const profile = profiles.find(profile => profile.username === pod.username);\n\n        if (profile) {\n            profile.podsCount = (profile.podsCount || 0) - 1;\n            await axios.put(`https://peapods-base.onrender.com/accounts/${profile.id}`, profile);\n        }\n    } catch (error) {\n        console.error(\"Error updating profile pod count on delete:\", error);\n    }\n}\n\n// Setup listeners for comment buttons\nfunction setupCommentListeners() {\n    const commentButtons = document.querySelectorAll(\".comment-btn\");\n    const deleteCommentButtons = document.querySelectorAll(\".delete-comment-btn\");\n\n    commentButtons.forEach(button => {\n        button.addEventListener(\"click\", async () => {\n            const podId = button.getAttribute(\"data-pod-id\");\n            const commentText = document.getElementById(`commentText-${podId}`).value;\n            if (commentText.trim()) {\n                await addComment(podId, commentText);\n            }\n        });\n    });\n\n    deleteCommentButtons.forEach(button => {\n        button.addEventListener(\"click\", async () => {\n            const podId = button.getAttribute(\"data-pod-id\");\n            const commentId = button.getAttribute(\"data-comment-id\");\n            await deleteComment(podId, commentId);\n        });\n    });\n}\n\n// Add a comment\nasync function addComment(podId, commentText) {\n    try {\n        const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n        const response = await axios.get(`https://peapods-base.onrender.com/pods/${podId}`);\n        const pod = response.data;\n\n        const newComment = {\n            commentId: Date.now(),\n            userId: loggedInUser.id,\n            username: loggedInUser.username,\n            text: commentText\n        };\n\n        pod.comments = pod.comments || [];\n        pod.comments.push(newComment);\n\n        await axios.put(`https://peapods-base.onrender.com/pods/${podId}`, pod);\n        fetchPods();\n    } catch (error) {\n        console.error(\"Error adding comment:\", error);\n    }\n}\n\n// Delete a comment\nasync function deleteComment(podId, commentId) {\n    try {\n        const response = await axios.get(`https://peapods-base.onrender.com/pods/${podId}`);\n        const pod = response.data;\n\n        pod.comments = pod.comments.filter(comment => comment.commentId !== parseInt(commentId));\n\n        await axios.put(`https://peapods-base.onrender.com/pods/${podId}`, pod);\n        fetchPods();\n    } catch (error) {\n        console.error(\"Error deleting comment:\", error);\n    }\n}\n\n// Open and close modal for creating pod\nconst createPodButton = document.getElementById(\"createPodButton\");\nconst createPodModal = document.getElementById(\"createPodModal\");\nconst closeModalButton = document.getElementById(\"closeModalButton\");\nconst submitPodButton = document.getElementById(\"submitPodButton\");\n\ncreatePodButton.addEventListener(\"click\", () => {\n    createPodModal.classList.toggle(\"change__invisible\");\n    createPodModal.style.display = \"flex\";\n});\n\ncloseModalButton.addEventListener(\"click\", () => {\n    createPodModal.classList.toggle(\"change__invisible\");\n    setTimeout(() => {\n        createPodModal.style.display = \"none\";\n    }, 300);\n});\n\n// Prevent modal from closing on submit and fetch pods again\nsubmitPodButton.addEventListener(\"click\", async () => {\n    const podText = document.getElementById(\"podText\").value;\n    const podImageInput = document.getElementById(\"podImageInput\").files[0];\n    const isAnonymous = document.getElementById(\"anonymousCheckbox\").checked;\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n\n    if (podText.trim()) {\n        const newPod = {\n            userId: isAnonymous ? null : loggedInUser.id,\n            username: isAnonymous ? \"Anonymous\" : loggedInUser.username,\n            text: podText,\n            time: Date.now(),\n            comments: []\n        };\n\n        if (podImageInput) {\n            const imageUrl = await uploadImage(podImageInput);\n            newPod.image = imageUrl;\n        }\n\n        await axios.post(\"https://peapods-base.onrender.com/pods\", newPod);\n        await updateProfilePodCountOnCreate(loggedInUser.id);\n        fetchPods();\n        createPodModal.classList.toggle(\"change__invisible\");\n        createPodModal.style.display = \"none\";\n    }\n});\n\n// Upload image function\nasync function uploadImage(image) {\n    const formData = new FormData();\n    formData.append(\"image\", image);\n\n    const response = await axios.post(\"https://peapods-base.onrender.com/upload\", formData);\n    return response.data.imageUrl; // Adjust based on your API response structure\n}\n\n// Update profile pod count on create\nasync function updateProfilePodCountOnCreate(userId) {\n    try {\n        const profileResponse = await axios.get(`https://peapods-base.onrender.com/accounts/${userId}`);\n        const profile = profileResponse.data;\n\n        if (profile) {\n            profile.podsCount = (profile.podsCount || 0) + 1;\n            await axios.put(`https://peapods-base.onrender.com/accounts/${profile.id}`, profile);\n        }\n    } catch (error) {\n        console.error(\"Error updating profile pod count on create:\", error);\n    }\n}\n\n// Event listeners for opening modals\ndocument.addEventListener(\"DOMContentLoaded\", fetchProfiles);\ndocument.addEventListener(\"DOMContentLoaded\", fetchPods);\n\nconst toTopButton = document.getElementById(\"toTopButton\");\n\n// Показати кнопку при прокручуванні вниз\nwindow.onscroll = function() {\n    if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {\n        toTopButton.style.display = \"block\";\n    } else {\n        toTopButton.style.display = \"none\";\n    }\n};\n\n// Прокрутка до верхньої частини сторінки\ntoTopButton.addEventListener(\"click\", () => {\n    window.scrollTo({top: 0, behavior: 'smooth'});\n});\n"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$fmRoT","$212038711ef1a1fe$var$fetchProfiles","loggedInUser","JSON","parse","localStorage","getItem","user","response","default","get","data","document","getElementById","textContent","name","username","$212038711ef1a1fe$var$handleProfileError","error","console","window","location","href","alert","removeItem","$212038711ef1a1fe$var$fetchPods","pods","sort","a","b","Date","time","podsContainer","innerHTML","currentUserId","forEach","pod","podItem","createElement","classList","add","userImage","toLocaleString","text","image","comments","map","comment","userId","commentId","join","querySelector","usernameElement","addEventListener","encodeURIComponent","deleteButton","$212038711ef1a1fe$var$deletePod","appendChild","$212038711ef1a1fe$var$setupCommentListeners","commentButtons","querySelectorAll","deleteCommentButtons","button","podId","getAttribute","commentText","value","trim","$212038711ef1a1fe$var$addComment","$212038711ef1a1fe$var$deleteComment","delete","$212038711ef1a1fe$var$updateProfilePodCountOnDelete","profile","profiles","profileResponse","find","podsCount","put","newComment","now","push","filter","parseInt","$212038711ef1a1fe$var$createPodButton","$212038711ef1a1fe$var$createPodModal","$212038711ef1a1fe$var$closeModalButton","$212038711ef1a1fe$var$submitPodButton","$212038711ef1a1fe$var$uploadImage","formData","FormData","append","post","imageUrl","$212038711ef1a1fe$var$updateProfilePodCountOnCreate","toggle","style","display","setTimeout","podText","podImageInput","files","isAnonymous","checked","newPod","$212038711ef1a1fe$var$toTopButton","onscroll","body","scrollTop","documentElement","scrollTo","top","behavior"],"version":3,"file":"home.7a0624e5.js.map"}