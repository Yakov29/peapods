{"mappings":"A,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,Q,C,I,E,E,SCEA,eAAe,IACX,IAAM,EAAe,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,iBACjD,IAEA,SAAS,cAAc,CAAC,iBAAiB,GAAG,CAAG,EAAa,MAAM,EAAI,8BACtE,SAAS,cAAc,CAAC,QAAQ,KAAK,CAAG,EAAa,IAAI,CACzD,SAAS,cAAc,CAAC,YAAY,KAAK,CAAG,EAAa,QAAQ,CAEzE,CAEA,eAAe,EAAc,CAAK,EAC9B,EAAM,cAAc,GAEpB,IAAM,EAAO,SAAS,cAAc,CAAC,QAAQ,KAAK,CAC5C,EAAW,SAAS,cAAc,CAAC,YAAY,KAAK,CACpD,EAAW,SAAS,cAAc,CAAC,YAAY,KAAK,CAEpD,EAAe,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,iBAErD,GAAI,EACA,GAAI,CAEA,IAAM,EAAc,CAChB,GAAG,CAAY,CACf,KAAA,EACA,SAAA,EACA,SAAA,CACJ,CAEA,OAAM,AAAA,CAAA,EAAA,EAAA,OAAI,AAAJ,EAAM,GAAG,CAAC,CAAC,2CAA2C,EAAE,EAAa,EAAE,CAAC,CAAC,CAAE,GAGjF,aAAa,OAAO,CAAC,eAAgB,KAAK,SAAS,CAAC,IAEpD,MAAM,gCACV,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,0BAA2B,GACzC,MAAM,gDACV,CAER,CAEA,eAAe,IAEX,aAAa,UAAU,CAAC,gBAExB,OAAO,QAAQ,CAAC,IAAI,CAAG,cAC3B,CAEA,eAAe,IACX,IAAM,EAAe,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,iBAErD,GAAI,EACA,GAAI,CACA,MAAM,AAAA,CAAA,EAAA,EAAA,OAAI,AAAJ,EAAM,MAAM,CAAC,CAAC,2CAA2C,EAAE,EAAa,EAAE,CAAC,CAAC,EAElF,aAAa,UAAU,CAAC,gBACxB,MAAM,iCAEN,OAAO,QAAQ,CAAC,IAAI,CAAG,cAC3B,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,0BAA2B,GACzC,MAAM,gDACV,CAER,CAGA,SAAS,cAAc,CAAC,eAAe,gBAAgB,CAAC,SAAU,GAClE,SAAS,cAAc,CAAC,gBAAgB,gBAAgB,CAAC,QAAS,GAClE,SAAS,cAAc,CAAC,uBAAuB,gBAAgB,CAAC,QAAS,GAGzE,OAAO,gBAAgB,CAAC,mBAAoB","sources":["<anon>","src/js/profile.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire2ef1\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire2ef1\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $fmRoT = parcelRequire(\"fmRoT\");\nasync function $fabc692e87db85a7$var$fetchProfile() {\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n    if (loggedInUser) {\n        // Display the avatar; the user cannot change it\n        document.getElementById(\"profileAvatar\").src = loggedInUser.avatar || \"./images/default-avatar.png\"; // Default avatar\n        document.getElementById(\"name\").value = loggedInUser.name;\n        document.getElementById(\"username\").value = loggedInUser.username;\n    }\n}\nasync function $fabc692e87db85a7$var$updateProfile(event) {\n    event.preventDefault(); // Prevent the form from submitting normally\n    const name = document.getElementById(\"name\").value;\n    const username = document.getElementById(\"username\").value;\n    const password = document.getElementById(\"password\").value;\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n    if (loggedInUser) try {\n        // Update user data without changing the avatar\n        const updatedUser = {\n            ...loggedInUser,\n            name: name,\n            username: username,\n            password: password\n        };\n        await (0, $fmRoT.default).put(`https://peapods-base.onrender.com/accounts/${loggedInUser.id}`, updatedUser);\n        // Update local storage\n        localStorage.setItem(\"loggedInUser\", JSON.stringify(updatedUser));\n        alert(\"Profile updated successfully!\");\n    } catch (error) {\n        console.error(\"Error updating profile:\", error);\n        alert(\"An error occurred while updating the profile.\");\n    }\n}\nasync function $fabc692e87db85a7$var$logout() {\n    // Clear the user data from local storage\n    localStorage.removeItem(\"loggedInUser\");\n    // Redirect to the login page or homepage\n    window.location.href = \"./login.html\"; // Adjust the path as needed\n}\nasync function $fabc692e87db85a7$var$deleteAccount() {\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n    if (loggedInUser) try {\n        await (0, $fmRoT.default).delete(`https://peapods-base.onrender.com/accounts/${loggedInUser.id}`);\n        // Clear the user data from local storage\n        localStorage.removeItem(\"loggedInUser\");\n        alert(\"Account deleted successfully!\");\n        // Redirect to the homepage or login page\n        window.location.href = \"./index.html\"; // Adjust the path as needed\n    } catch (error) {\n        console.error(\"Error deleting account:\", error);\n        alert(\"An error occurred while deleting the account.\");\n    }\n}\n// Add event listener for form submission\ndocument.getElementById(\"profileForm\").addEventListener(\"submit\", $fabc692e87db85a7$var$updateProfile);\ndocument.getElementById(\"logoutButton\").addEventListener(\"click\", $fabc692e87db85a7$var$logout);\ndocument.getElementById(\"deleteAccountButton\").addEventListener(\"click\", $fabc692e87db85a7$var$deleteAccount);\n// Fetch profile data on page load\nwindow.addEventListener(\"DOMContentLoaded\", $fabc692e87db85a7$var$fetchProfile);\n\n\n//# sourceMappingURL=profile.c4dd2304.js.map\n","import axios from \"axios\";\n\nasync function fetchProfile() {\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n    if (loggedInUser) {\n        // Display the avatar; the user cannot change it\n        document.getElementById(\"profileAvatar\").src = loggedInUser.avatar || './images/default-avatar.png'; // Default avatar\n        document.getElementById(\"name\").value = loggedInUser.name;\n        document.getElementById(\"username\").value = loggedInUser.username;\n    }\n}\n\nasync function updateProfile(event) {\n    event.preventDefault(); // Prevent the form from submitting normally\n\n    const name = document.getElementById(\"name\").value;\n    const username = document.getElementById(\"username\").value;\n    const password = document.getElementById(\"password\").value;\n\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n\n    if (loggedInUser) {\n        try {\n            // Update user data without changing the avatar\n            const updatedUser = {\n                ...loggedInUser,\n                name,\n                username,\n                password, // Ensure you hash this on the server-side for security\n            };\n\n            await axios.put(`https://peapods-base.onrender.com/accounts/${loggedInUser.id}`, updatedUser);\n\n            // Update local storage\n            localStorage.setItem(\"loggedInUser\", JSON.stringify(updatedUser));\n\n            alert(\"Profile updated successfully!\");\n        } catch (error) {\n            console.error(\"Error updating profile:\", error);\n            alert(\"An error occurred while updating the profile.\");\n        }\n    }\n}\n\nasync function logout() {\n    // Clear the user data from local storage\n    localStorage.removeItem(\"loggedInUser\");\n    // Redirect to the login page or homepage\n    window.location.href = \"./login.html\"; // Adjust the path as needed\n}\n\nasync function deleteAccount() {\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n\n    if (loggedInUser) {\n        try {\n            await axios.delete(`https://peapods-base.onrender.com/accounts/${loggedInUser.id}`);\n            // Clear the user data from local storage\n            localStorage.removeItem(\"loggedInUser\");\n            alert(\"Account deleted successfully!\");\n            // Redirect to the homepage or login page\n            window.location.href = \"./index.html\"; // Adjust the path as needed\n        } catch (error) {\n            console.error(\"Error deleting account:\", error);\n            alert(\"An error occurred while deleting the account.\");\n        }\n    }\n}\n\n// Add event listener for form submission\ndocument.getElementById(\"profileForm\").addEventListener(\"submit\", updateProfile);\ndocument.getElementById(\"logoutButton\").addEventListener(\"click\", logout);\ndocument.getElementById(\"deleteAccountButton\").addEventListener(\"click\", deleteAccount);\n\n// Fetch profile data on page load\nwindow.addEventListener(\"DOMContentLoaded\", fetchProfile);\n"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$fmRoT","$fabc692e87db85a7$var$fetchProfile","loggedInUser","JSON","parse","localStorage","getItem","document","getElementById","src","avatar","value","name","username","$fabc692e87db85a7$var$updateProfile","event","preventDefault","password","updatedUser","default","put","setItem","stringify","alert","error","console","$fabc692e87db85a7$var$logout","removeItem","window","location","href","$fabc692e87db85a7$var$deleteAccount","delete","addEventListener"],"version":3,"file":"profile.c4dd2304.js.map"}