async function e(){let e=JSON.parse(localStorage.getItem("loggedInUser")),t=new URLSearchParams(window.location.search).get("username");if(document.getElementById("profileName").textContent="",document.getElementById("profileNickname").textContent="",document.getElementById("podsCount").textContent="0 Pods",document.getElementById("followingCount").textContent="0 Following",document.getElementById("followersCount").textContent="0 Followers",e&&!t&&(document.getElementById("profileName").textContent=e.name,document.getElementById("profileNickname").textContent=`@${e.username}`,document.getElementById("podsCount").textContent=`${e.podsCount||0} Pods`,document.getElementById("followingCount").textContent=`${e.followingCount||0} Following`,document.getElementById("followersCount").textContent=`${e.followersCount||0} Followers`),t)try{let n=await fetch("https://peapods-base.onrender.com/accounts"),r=(await n.json()).find(e=>e.username===t);r&&e.username!==t?(document.getElementById("profileName").textContent=r.name,document.getElementById("profileNickname").textContent=`@${r.username}`,document.getElementById("podsCount").textContent=`${r.podsCount||0} Pods`,document.getElementById("followingCount").textContent=`${r.followingCount||0} Following`,document.getElementById("followersCount").textContent=`${r.followersCount||0} Followers`,document.getElementById("subscribeButton").addEventListener("click",()=>{e.id!==r.id?o(e,r):alert("You cannot subscribe to yourself!")})):r?e.username===t&&alert("You cannot view your own profile this way."):alert("Profile not found or an error occurred.")}catch(e){console.error("Error fetching profiles:",e)}}async function t(e){try{let t=await fetch("https://peapods-base.onrender.com/pods"),o=await t.json().filter(t=>t.username===e).sort((e,t)=>new Date(t.time)-new Date(e.time)),n=document.getElementById("podsContainer");n.innerHTML="";let r=JSON.parse(localStorage.getItem("loggedInUser")).id;o.forEach(e=>{let t=document.createElement("li");t.classList.add("pod"),t.innerHTML=`
                <div class="pod__title">
                    <img class="pod__user__image" src="${e.userImage||"./images/Group 5.19.png"}" alt="User Image" style="cursor: pointer;" data-username="${e.username}">
                    <div class="pod__data">
                        <p class="pod__userdata" style="cursor: pointer;" data-username="${e.username}">${e.username}</p>
                        <p class="pod__time">${new Date(e.time).toLocaleString()}</p>
                    </div>
                </div>
                <h2 class="pod__text">${e.text}</h2>
                ${e.image?`<img class="pod__image" src="${e.image}" alt="Pod Image">`:""}
                <ul class="comments-list" id="comments-${e.id}">
                    ${e.comments?e.comments.map(e=>`
                        <li class="comment-item">
                            <p><b>${e.username}</b>: ${e.text}</p>
                        </li>
                    `).join(""):""}
                </ul>
            `;let o=t.querySelector(".pod__user__image"),s=t.querySelector(".pod__userdata");if(o.addEventListener("click",()=>{window.location.href=`/user.html?username=${encodeURIComponent(e.username)}`}),s.addEventListener("click",()=>{window.location.href=`/user.html?username=${encodeURIComponent(e.username)}`}),e.userId===r){let o=document.createElement("button");o.textContent="Delete Pod",o.classList.add("delete-pod-button"),o.addEventListener("click",()=>{deletePod(e.id)}),t.appendChild(o)}n.appendChild(t)})}catch(e){console.error("Error fetching pods:",e)}}async function o(e,t){try{let o={...e,following:[...e.following||[],t.username]};if(!(await fetch(`https://peapods-base.onrender.com/accounts/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw Error("Failed to subscribe to user");localStorage.setItem("loggedInUser",JSON.stringify(o)),alert(`Subscribed to ${t.username} successfully!`)}catch(e){console.error("Error subscribing to user:",e),alert("An error occurred while subscribing.")}}document.addEventListener("DOMContentLoaded",async()=>{await e();let o=new URLSearchParams(window.location.search).get("username");o&&await t(o)});
//# sourceMappingURL=user.5caeb5ef.js.map
