{"mappings":"ACCA,eAAe,IACX,IAAM,EAAe,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,iBACjD,GACA,SAAS,cAAc,CAAC,QAAQ,KAAK,CAAG,EAAa,IAAI,CACzD,SAAS,cAAc,CAAC,YAAY,KAAK,CAAG,EAAa,QAAQ,EAEjE,QAAQ,KAAK,CAAC,gCAEtB,CAGA,eAAe,EAAc,CAAK,EAC9B,EAAM,cAAc,GAEpB,IAAM,EAAO,SAAS,cAAc,CAAC,QAAQ,KAAK,CAC5C,EAAW,SAAS,cAAc,CAAC,YAAY,KAAK,CACpD,EAAW,SAAS,cAAc,CAAC,YAAY,KAAK,CACpD,EAAe,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,iBAErD,GAAI,GAAgB,EAAa,EAAE,CAC/B,GAAI,CACA,IAAM,EAAc,CAChB,GAAG,CAAY,CACf,KAAA,EACA,SAAA,EACA,SAAA,CACJ,EAEM,EAAW,MAAM,MAAM,CAAC,2CAA2C,EAAE,EAAa,EAAE,CAAC,CAAC,CAAE,CAC1F,OAAQ,MACR,QAAS,CACL,eAAgB,kBACpB,EACA,KAAM,KAAK,SAAS,CAAC,EACzB,GAEA,GAAI,EAAS,EAAE,CAEX,aAAa,OAAO,CAAC,eAAgB,KAAK,SAAS,CAAC,IACpD,MAAM,sCAEN,MAAM,AAAI,MAAM,6BAA+B,EAAS,MAAM,CAEtE,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,0BAA2B,EAAM,OAAO,EACtD,MAAM,gDACV,MAEA,QAAQ,KAAK,CAAC,+CAEtB,CASA,eAAe,IACX,IAAM,EAAe,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,iBACrD,GAAI,GAAgB,EAAa,EAAE,CAC/B,GAAI,CACA,IAAM,EAAW,MAAM,MAAM,CAAC,2CAA2C,EAAE,EAAa,EAAE,CAAC,CAAC,CAAE,CAC1F,OAAQ,QACZ,GAEA,GAAI,EAAS,EAAE,CACX,aAAa,UAAU,CAAC,gBACxB,MAAM,iCACN,OAAO,QAAQ,CAAC,IAAI,CAAG,oBAEvB,MAAM,AAAI,MAAM,6BAA+B,EAAS,MAAM,CAEtE,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,0BAA2B,EAAM,OAAO,EACtD,MAAM,gDACV,MAEA,QAAQ,KAAK,CAAC,+CAEtB,CAGA,SAAS,cAAc,CAAC,eAAe,gBAAgB,CAAC,SAAU,GAClE,SAAS,cAAc,CAAC,gBAAgB,gBAAgB,CAAC,QAhCzD,WACI,aAAa,UAAU,CAAC,gBACxB,OAAO,QAAQ,CAAC,IAAI,CAAG,cAC3B,GA8BA,SAAS,cAAc,CAAC,uBAAuB,gBAAgB,CAAC,QAAS,GAGzE,OAAO,gBAAgB,CAAC,mBAAoB","sources":["<anon>","src/js/profile.js"],"sourcesContent":["var $fabc692e87db85a7$exports = {};\n// Fetch user profile data on page load\nasync function $fabc692e87db85a7$var$fetchProfile() {\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n    if (loggedInUser) {\n        document.getElementById(\"name\").value = loggedInUser.name;\n        document.getElementById(\"username\").value = loggedInUser.username;\n    } else console.error(\"No logged-in user data found.\");\n}\n// Update user profile\nasync function $fabc692e87db85a7$var$updateProfile(event) {\n    event.preventDefault(); // Prevent form submission\n    const name = document.getElementById(\"name\").value;\n    const username = document.getElementById(\"username\").value;\n    const password = document.getElementById(\"password\").value;\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n    if (loggedInUser && loggedInUser.id) try {\n        const updatedUser = {\n            ...loggedInUser,\n            name: name,\n            username: username,\n            password: password // Ensure password is hashed on the server side\n        };\n        const response = await fetch(`https://peapods-base.onrender.com/accounts/${loggedInUser.id}`, {\n            method: \"PUT\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(updatedUser)\n        });\n        if (response.ok) {\n            // Update local storage\n            localStorage.setItem(\"loggedInUser\", JSON.stringify(updatedUser));\n            alert(\"Profile updated successfully!\");\n        } else throw new Error(\"Failed to update profile: \" + response.status);\n    } catch (error) {\n        console.error(\"Error updating profile:\", error.message);\n        alert(\"An error occurred while updating the profile.\");\n    }\n    else console.error(\"User ID is missing or user is not logged in.\");\n}\n// Logout function\nfunction $fabc692e87db85a7$var$logout() {\n    localStorage.removeItem(\"loggedInUser\");\n    window.location.href = \"./index.html\"; // Redirect to the login or homepage\n}\n// Delete account function\nasync function $fabc692e87db85a7$var$deleteAccount() {\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n    if (loggedInUser && loggedInUser.id) try {\n        const response = await fetch(`https://peapods-base.onrender.com/accounts/${loggedInUser.id}`, {\n            method: \"DELETE\"\n        });\n        if (response.ok) {\n            localStorage.removeItem(\"loggedInUser\");\n            alert(\"Account deleted successfully!\");\n            window.location.href = \"./index.html\"; // Redirect to the homepage or login page\n        } else throw new Error(\"Failed to delete account: \" + response.status);\n    } catch (error) {\n        console.error(\"Error deleting account:\", error.message);\n        alert(\"An error occurred while deleting the account.\");\n    }\n    else console.error(\"User ID is missing or user is not logged in.\");\n}\n// Event listeners for form submission, logout, and delete actions\ndocument.getElementById(\"profileForm\").addEventListener(\"submit\", $fabc692e87db85a7$var$updateProfile);\ndocument.getElementById(\"logoutButton\").addEventListener(\"click\", $fabc692e87db85a7$var$logout);\ndocument.getElementById(\"deleteAccountButton\").addEventListener(\"click\", $fabc692e87db85a7$var$deleteAccount);\n// Load profile data when the page loads\nwindow.addEventListener(\"DOMContentLoaded\", $fabc692e87db85a7$var$fetchProfile);\n\n\n//# sourceMappingURL=profile.84c287de.js.map\n","// Fetch user profile data on page load\nasync function fetchProfile() {\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n    if (loggedInUser) {\n        document.getElementById(\"name\").value = loggedInUser.name;\n        document.getElementById(\"username\").value = loggedInUser.username;\n    } else {\n        console.error(\"No logged-in user data found.\");\n    }\n}\n\n// Update user profile\nasync function updateProfile(event) {\n    event.preventDefault(); // Prevent form submission\n\n    const name = document.getElementById(\"name\").value;\n    const username = document.getElementById(\"username\").value;\n    const password = document.getElementById(\"password\").value;\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n\n    if (loggedInUser && loggedInUser.id) {\n        try {\n            const updatedUser = {\n                ...loggedInUser,\n                name,\n                username,\n                password // Ensure password is hashed on the server side\n            };\n\n            const response = await fetch(`https://peapods-base.onrender.com/accounts/${loggedInUser.id}`, {\n                method: 'PUT',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(updatedUser)\n            });\n\n            if (response.ok) {\n                // Update local storage\n                localStorage.setItem(\"loggedInUser\", JSON.stringify(updatedUser));\n                alert(\"Profile updated successfully!\");\n            } else {\n                throw new Error(\"Failed to update profile: \" + response.status);\n            }\n        } catch (error) {\n            console.error(\"Error updating profile:\", error.message);\n            alert(\"An error occurred while updating the profile.\");\n        }\n    } else {\n        console.error(\"User ID is missing or user is not logged in.\");\n    }\n}\n\n// Logout function\nfunction logout() {\n    localStorage.removeItem(\"loggedInUser\");\n    window.location.href = \"./index.html\"; // Redirect to the login or homepage\n}\n\n// Delete account function\nasync function deleteAccount() {\n    const loggedInUser = JSON.parse(localStorage.getItem(\"loggedInUser\"));\n    if (loggedInUser && loggedInUser.id) {\n        try {\n            const response = await fetch(`https://peapods-base.onrender.com/accounts/${loggedInUser.id}`, {\n                method: 'DELETE'\n            });\n\n            if (response.ok) {\n                localStorage.removeItem(\"loggedInUser\");\n                alert(\"Account deleted successfully!\");\n                window.location.href = \"./index.html\"; // Redirect to the homepage or login page\n            } else {\n                throw new Error(\"Failed to delete account: \" + response.status);\n            }\n        } catch (error) {\n            console.error(\"Error deleting account:\", error.message);\n            alert(\"An error occurred while deleting the account.\");\n        }\n    } else {\n        console.error(\"User ID is missing or user is not logged in.\");\n    }\n}\n\n// Event listeners for form submission, logout, and delete actions\ndocument.getElementById(\"profileForm\").addEventListener(\"submit\", updateProfile);\ndocument.getElementById(\"logoutButton\").addEventListener(\"click\", logout);\ndocument.getElementById(\"deleteAccountButton\").addEventListener(\"click\", deleteAccount);\n\n// Load profile data when the page loads\nwindow.addEventListener(\"DOMContentLoaded\", fetchProfile);\n"],"names":["$fabc692e87db85a7$var$fetchProfile","loggedInUser","JSON","parse","localStorage","getItem","document","getElementById","value","name","username","console","error","$fabc692e87db85a7$var$updateProfile","event","preventDefault","password","id","updatedUser","response","fetch","method","headers","body","stringify","ok","setItem","alert","Error","status","message","$fabc692e87db85a7$var$deleteAccount","removeItem","window","location","href","addEventListener"],"version":3,"file":"profile.84c287de.js.map"}